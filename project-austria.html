  <style>
    /* --- EXISTING STYLES --- */
    .modal-section-title { color: #00ffcc; font-size: 1.2rem; margin-top: 25px; margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 5px; }
    .modal-subsection-title { color: #5EEAD4; font-size: 0.9rem; margin-top: 15px; margin-bottom: 8px; font-weight: bold; }
    p, li { font-size: 0.85rem; line-height: 1.6; color: #ddd; }
    strong { color: #fff; }

    /* --- NEW IMAGE STYLES --- */
    .img-row {
        display: flex;
        gap: 15px; /* Space between images */
        margin: 20px 0;
        align-items: flex-start;
    }
    .img-col {
        flex: 1; /* Each column takes equal width */
        text-align: center;
    }
    .project-img {
        width: 100%;
        height: auto;
        border-radius: 4px;
        border: 1px solid #444;
        transition: transform 0.2s;
    }
    .project-img:hover {
        transform: scale(1.02);
        border-color: #00ffcc;
    }
    .img-caption {
        font-size: 0.75rem;
        color: #888;
        margin-top: 5px;
        font-style: italic;
    }
</style>

<h3 class="modal-section-title">Project Overview</h3>
<p>
    During my time at Remote Sensing Solutions I developed a machine learning framework that predicts soil organic carbon (SOC) content in agricultural lands across
    Austria and Bulgaria at 10m resolution using Sentinel-2 spectral data. SOC is a critical indicator of soil health, agricultural productivity, and carbon 
    sequestration potential, yet traditional field sampling is expensive, time consuming and spatially limited. By leveraging freely available satellite imagery 
    from Sentinel-2, this approach demonstrates the potential for scalable, high-resolution and cost-effective SOC mapping across large agricultural regions.
</p>
<p>
    Using the LUCAS soil survey data as ground truth (131 field samples for Austria), we utilise raw spectral bands 
    as well as derived vegetation indices as predictive features. Given the limited dataset size, the best model achieved only 
    moderate predictive performance (R² = 0.21, RMSE = 5.5 g C/kg), however this is consistent with similar studies that used comparable methodologies and 
    data volumes <sup><a href="https://www.mdpi.com/2072-4292/15/8/2118" target="_blank" rel="noopener noreferrer" style="color: white;" title="Soil Organic Carbon Prediction Using Sentinel-2 Data and Environmental Variables in a Karst Trough Valley Area of Southwest China">[1]</a></sup>.
    Importantly, the resulting predictions aligned well with independent SOC maps from the Cup4Soil and AI4SoilHealth projects, providing 
    external validation and demonstrating the framework's ability to capture regional SOC patterns.
</p>

<div class="img-row">
    <div class="img-col">
        <img src="Austria_soc.png" 
             alt="Austria SOC" 
             class="project-img">
        <div class="img-caption">Figure 1: SOC predictions over Austrian agricultural lands</div>
    </div>
</div>

<h3 class="modal-section-title">Methodology</h3>

<h4 class="modal-subsection-title"> Bare Soil Composite Generation</h4>
<p>
    A fundamental challenge in optical soil mapping is that SOC signals are obstructed by vegetation for most of the year. Accurate predictions are only possible 
    on exposed, bare soil. To address this, we generated a 10m resolution Bare Soil Composite from Sentinel-2 imagery acquired post-harvest season. We applied a strict mask
    to exclude all pixels with active vegetation (NDVI > 0.25), ensuring that the spectral band values were exctracted exclusively from exposed soil surfaces.
</p>

<h4 class="modal-subsection-title">Feature Engineering</h4>
<p>
    From this composite, we constructed a feature space designed to capture soil physicochemical properties, consisting of: 
</p>
<ul>
    <li><strong>Raw Spectral Bands:</strong> RGB, NIR, LNIR, SWIR and LSWIR bands.</li>
    <li><strong>Derived Indices:</strong> Spectral indices known to correlate with carbon content, including Brightness Index (BI), Bare Soil Index (BSI), NBR2, and EVI.</li>
</ul>

<h4 class="modal-subsection-title">Statistical Optimisation for Limited Data</h4>
<p>
    To maximise predictive performance given the limited ground truth data (131 samples), we implemented specific statistical transformations to try mitigate 
    distribution imbalance and noise:
</p>
<ul>
    <li>
        <strong>Box-Cox Transformation:</strong> The target variable (SOC) was highly skewed (0.92). Applying a Box-Cox transformation reduced skewness to 0.05, 
        creating the approximately Gaussian distribution required for improved regression performance.
    </li>
    <li>
    <strong>Sample Weighting:</strong> To prevent the model from biasing towards the mean we applied inverse frequency sample weights. This penalised prediction 
        errors on extreme values more heavily, forcing the model to learn the characteristic of the entire soil carbon spectrum.
    </li>
</ul>

<h4 class="modal-subsection-title"> Model Architecture & Cross-Validation</h4>
<p>
    For our model architecture we utilised a Ensemble Regression Architecture, stacking Ridge Regression, Random Forest and XGBoost to try
    capture both simple trends and complex non-linear soil-spectral interactions.

</p>
<p><strong>Stratified Cross-Validation Strategy:</strong></p>
<p>
    With small datasets, random corss-validation splits often introduce bias (e.g., a validation fold containing only "medium" values). Therefore to ensure robust evaluation, 
    we implemented Stratified K-Fold Cross-Validation. The continous SOC target was binned into five strata, and folds were generated stratified by these bins. This 
    ensured that every training and validation split maintained the same distribution of low, medium and high SOC values as the original dataset, ensuring
    robustness with limited data.
</p>


<h3 class="modal-section-title">Results</h3>
<p>
    Among the evaluated architectures, the Ridge Regression model demonstrated the highest performance on the Austrian dataset, achieving a 
    cross-validation R² of 0.21 (RMSE: 5.5 g C/kg, MAE: 4.2 g C/kg). While this represents moderate predictive capability, these metrics align with 
    comparable satellite-based studies where ground truth data is sparse (N < 150). 
</p>

<h4 class="modal-subsection-title">Linear vs. Non-Linear Performance</h4>
<p>
    A critical finding of this study was the significant underperformance of complex tree-based models compared to linear methods:
</p>
<ul>
    <li><strong>Ridge Regression:</strong> R² = 0.21 </li>
    <li><strong>Random Forest:</strong> R² = 0.04</li>
    <li><strong>XGBoost:</strong> R² = -0.05</li>
</ul>
<p>
    This disparity indicates that the relationship between spectral features and SOC at this spatial scale is predominantly linear. It also serves as a reminder of 
    model complexity vs. data volume: with only 131 training samples, sophisticated non-linear algorithms often succumb to overfitting.
</p>

<h4 class="modal-subsection-title">Physical Interpretation & Feature Importance</h4>
<p>
    Feature importance analysis confirmed that the model was learning meaningful physical relationships rather than spurious correlations. The rankings were consistent 
    across both the Austria and Bulgaria datasets:
</p>

<ul>
    <li>
        <strong>Dominance of Shortwave & Near-Infrared (NIR):</strong>
        <br>
        The NIR and LNIR bands were the strongest predictors, accounting for ~26% and ~10%
        of feature importance respectively.
    </li>
    <li>
        <strong>Visible Spectrum Hierarchy (Blue > Red):</strong>
        <br>
        Surprisingly, the Blue band (24% importance) significantly outperformed the Red and Green bands. 
    </li>
    <li>
        <strong>Raw Bands vs. Derived Indices:</strong>
        <br>
        Derived indices (NDVI, BI) contributed only moderate value (3-11%). This suggests that the raw spectral bands already contain the majority of the 
        predictive signal, and that standard vegetation indices may be redundant when the model has direct access to the underlying spectral curve.
    </li>
</ul>
